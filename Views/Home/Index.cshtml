@{
    ViewData["Title"] = "Home Page";
}
@section Scripts
    {
    <link rel="stylesheet" type="text/css" href="~/lib/datatables/css/jquery.dataTables.css">
    <script type="text/javascript" src="~/lib/datatables/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $.ajax({
                url: "/api/expenses",
                type: "POST",
                datatype: "json",
                success: function (data) {
                    $('#example').DataTable({
                        data: data,
                        "columns": [
                            { "data": "id", "name": "id","visible":false },
                            {
                                "render": function (data, type,row)
                                { return '<a class="btn btn-info" href="/Expenses/Edit/' + row.id + '">Edit</a>'; }  
                            }, 
                            { "data": "expenseDate"},
                            { "data": "customer"},
                            { "data": "project"},
                            { "data": "amount"},
                            {
                                "render": function (data, type,row)
                                { return  '<a class="btn btn-danger" href="/Expenses/Delete/' + row.id + '">Delete</a>'; }
                            }, 
                        ],
                        paging: true,
                        filter: false,
                        order: [[2, 'desc']],
                        ordering: true,
                        columnDefs: [
                            { targets: 'no-sort', orderable: false }
                        ]
                    });
                }
            })
        });

        function DeleteData(CustomerID)
        {
            if (confirm("Are you sure you want to delete ...?"))
            {
                Delete(CustomerID);
            }
            else
            {
                return false;
            }
        }


    function Delete(CustomerID)
    {
      var url = '@Url.Content("~/")' + "DemoGrid/Delete";
      $.post(url, { ID: CustomerID }, function (data)
      {
          if (data)
          {
              oTable = $('#example').DataTable();
              oTable.draw();
          }
          else
          {
              alert("Something Went Wrong!");
          }
      });
    }
    </script>
 }
<div class="container">
    <div class=" dt-head-nowrap">
    <h2>Expenses</h2>
    <div class="col-lg-12">
        <p> <h4>Select an expense from the listing to edit or click "Add" to create a new Expense </h4></p>
    </div>
    </div>

    <div>
        <div class="col-md-9"></div>


        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th class="no-sort"></th>
                    <th class="no-sort col-md-1">Edit</th>
                    <th class="col-md-1">Date</th>
                    <th class="col-md-4">Customer</th>
                    <th class="col-md-4">Project</th>
                    <th class="col-md-pull-2">Amount</th>
                    <th class="no-sort col-md-1">Delete</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </tfoot>
        </table>
    </div>
</div>